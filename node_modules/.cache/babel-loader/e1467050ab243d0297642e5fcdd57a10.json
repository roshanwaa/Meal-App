{"ast":null,"code":"import _regeneratorRuntime from\"D:/Clone/Prj/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Clone/Prj/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Clone/Prj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import classes from'./AvailableMeals.module.css';import{Card}from'../UI/Card';import{MealsItem}from'./MealsItems/MealsItem';import{Spinner}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";var url='https://food-order-app-9b789-default-rtdb.asia-southeast1.firebasedatabase.app/meals.json';export var AvailableMeals=function AvailableMeals(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),httpError=_useState6[0],setHttpError=_useState6[1];useEffect(function(){var fetchMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,responseData,loadedMealsData,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error('Something is wrong!');case 5:_context.next=7;return response.json();case 7:responseData=_context.sent;// console.log(responseData);\nloadedMealsData=[];for(key in responseData){loadedMealsData.push({id:key,description:responseData[key].description,name:responseData[key].name,price:responseData[key].price});}setMeals(loadedMealsData);setIsLoading(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchMeals(){return _ref.apply(this,arguments);};}();fetchMeals().catch(function(error){setIsLoading(false);setHttpError(error.message);});},[]);if(isLoading){return/*#__PURE__*/_jsx(\"section\",{className:classes.mealsLoading,children:/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"light\"})});}if(httpError){return/*#__PURE__*/_jsx(\"section\",{className:classes.mealsError,children:/*#__PURE__*/_jsx(\"h3\",{children:httpError})});}var mealsList=meals.map(function(meal){return/*#__PURE__*/_jsx(MealsItem,{id:meal.id// this is new!\n,name:meal.name,description:meal.description,price:meal.price},meal.id);});return/*#__PURE__*/_jsx(\"section\",{className:classes.meals,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(\"ul\",{children:mealsList})})});};","map":{"version":3,"names":["React","useEffect","useState","classes","Card","MealsItem","Spinner","url","AvailableMeals","meals","setMeals","isLoading","setIsLoading","httpError","setHttpError","fetchMeals","fetch","response","ok","Error","json","responseData","loadedMealsData","key","push","id","description","name","price","catch","error","message","mealsLoading","mealsError","mealsList","map","meal"],"sources":["D:/Clone/Prj/src/Components/Meals/AvailableMeals.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport classes from './AvailableMeals.module.css';\r\nimport { Card } from '../UI/Card';\r\nimport { MealsItem } from './MealsItems/MealsItem';\r\n\r\nimport { Spinner } from 'react-bootstrap';\r\n\r\n\r\nconst url =\r\n  'https://food-order-app-9b789-default-rtdb.asia-southeast1.firebasedatabase.app/meals.json';\r\n\r\nexport const AvailableMeals = () => {\r\n  const [meals, setMeals] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [httpError, setHttpError] = useState();\r\n\r\n  useEffect(() => {\r\n    const fetchMeals = async () => {\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Something is wrong!');\r\n      }\r\n\r\n      const responseData = await response.json();\r\n\r\n      // console.log(responseData);\r\n\r\n      const loadedMealsData = [];\r\n\r\n      for (const key in responseData) {\r\n        loadedMealsData.push({\r\n          id: key,\r\n          description: responseData[key].description,\r\n          name: responseData[key].name,\r\n          price: responseData[key].price,\r\n        });\r\n      }\r\n      setMeals(loadedMealsData);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchMeals().catch((error) => {\r\n      setIsLoading(false);\r\n      setHttpError(error.message);\r\n    });\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className={classes.mealsLoading}>\r\n        <Spinner animation=\"grow\" variant=\"light\" />\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (httpError) {\r\n    return (\r\n      <section className={classes.mealsError}>\r\n        <h3>{httpError}</h3>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  const mealsList = meals.map((meal) => {\r\n    return (\r\n      <MealsItem\r\n        id={meal.id} // this is new!\r\n        key={meal.id}\r\n        name={meal.name}\r\n        description={meal.description}\r\n        price={meal.price}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <section className={classes.meals}>\r\n      <Card>\r\n        <ul>{mealsList}</ul>\r\n      </Card>\r\n    </section>\r\n  );\r\n};\r\n"],"mappings":"sTAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,QAAP,KAAoB,6BAApB,CACA,OAASC,IAAT,KAAqB,YAArB,CACA,OAASC,SAAT,KAA0B,wBAA1B,CAEA,OAASC,OAAT,KAAwB,iBAAxB,C,2CAGA,GAAMC,IAAG,CACP,2FADF,CAGA,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAClC,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAAkCR,QAAQ,CAAC,IAAD,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eACA,eAAkCV,QAAQ,EAA1C,yCAAOW,SAAP,eAAkBC,YAAlB,eAEAb,SAAS,CAAC,UAAM,CACd,GAAMc,WAAU,4FAAG,yMACMC,MAAK,CAACT,GAAD,CADX,QACXU,QADW,kBAGZA,QAAQ,CAACC,EAHG,8BAIT,IAAIC,MAAJ,CAAU,qBAAV,CAJS,8BAOUF,SAAQ,CAACG,IAAT,EAPV,QAOXC,YAPW,eASjB;AAEMC,eAXW,CAWO,EAXP,CAajB,IAAWC,GAAX,GAAkBF,aAAlB,CAAgC,CAC9BC,eAAe,CAACE,IAAhB,CAAqB,CACnBC,EAAE,CAAEF,GADe,CAEnBG,WAAW,CAAEL,YAAY,CAACE,GAAD,CAAZ,CAAkBG,WAFZ,CAGnBC,IAAI,CAAEN,YAAY,CAACE,GAAD,CAAZ,CAAkBI,IAHL,CAInBC,KAAK,CAAEP,YAAY,CAACE,GAAD,CAAZ,CAAkBK,KAJN,CAArB,EAMD,CACDlB,QAAQ,CAACY,eAAD,CAAR,CACAV,YAAY,CAAC,KAAD,CAAZ,CAtBiB,uDAAH,kBAAVG,WAAU,0CAAhB,CAyBAA,UAAU,GAAGc,KAAb,CAAmB,SAACC,KAAD,CAAW,CAC5BlB,YAAY,CAAC,KAAD,CAAZ,CACAE,YAAY,CAACgB,KAAK,CAACC,OAAP,CAAZ,CACD,CAHD,EAID,CA9BQ,CA8BN,EA9BM,CAAT,CAgCA,GAAIpB,SAAJ,CAAe,CACb,mBACE,gBAAS,SAAS,CAAER,OAAO,CAAC6B,YAA5B,uBACE,KAAC,OAAD,EAAS,SAAS,CAAC,MAAnB,CAA0B,OAAO,CAAC,OAAlC,EADF,EADF,CAKD,CAED,GAAInB,SAAJ,CAAe,CACb,mBACE,gBAAS,SAAS,CAAEV,OAAO,CAAC8B,UAA5B,uBACE,oBAAKpB,SAAL,EADF,EADF,CAKD,CAED,GAAMqB,UAAS,CAAGzB,KAAK,CAAC0B,GAAN,CAAU,SAACC,IAAD,CAAU,CACpC,mBACE,KAAC,SAAD,EACE,EAAE,CAAEA,IAAI,CAACX,EAAI;AADf,CAGE,IAAI,CAAEW,IAAI,CAACT,IAHb,CAIE,WAAW,CAAES,IAAI,CAACV,WAJpB,CAKE,KAAK,CAAEU,IAAI,CAACR,KALd,EAEOQ,IAAI,CAACX,EAFZ,CADF,CASD,CAViB,CAAlB,CAYA,mBACE,gBAAS,SAAS,CAAEtB,OAAO,CAACM,KAA5B,uBACE,KAAC,IAAD,wBACE,oBAAKyB,SAAL,EADF,EADF,EADF,CAOD,CAxEM"},"metadata":{},"sourceType":"module"}